package fr.leobatouxas.gestionculture;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

import fr.leobatouxas.gestionculture.modele.AccesDistant;
import fr.leobatouxas.gestionculture.modele.Exploitant;

public class AjoutExploitant extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ajout_exploitant);

        //btn Suivant -> AjouterExploitation
        Button btn = findViewById(R.id.btnSuivantAjoutExploitant);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                EditText edNom = (EditText) findViewById(R.id.editTextNomExploitant);
                EditText edPrenom = (EditText) findViewById(R.id.editTextPrenomExploitant);
                EditText edAdresse = (EditText) findViewById(R.id.editTextAdresse);
                EditText edVille = (EditText) findViewById(R.id.editTextVille);
                EditText edCodePostal = (EditText) findViewById(R.id.editTextPostalAddress);
                EditText edTelephone = (EditText) findViewById(R.id.editTextPhone);
                EditText edEmail = (EditText) findViewById(R.id.editTextEmail);
                String codeExploitant = null;
                if(Global.lastExploitant != null){
                    String[] code = Global.lastExploitant.getCodeExploitant().split("EA");
                    Integer codeint = Integer.parseInt(code[1]) + 1;
                    codeExploitant = "EA" + codeint;
                }else {
                    codeExploitant ="EA1";
                }

                Exploitant exploitant = new Exploitant(codeExploitant,edNom.getText().toString(),edPrenom.getText().toString(),edAdresse.getText().toString(),edVille.getText().toString(),edCodePostal.getText().toString(),edTelephone.getText().toString(), edEmail.getText().toString());
                //exploitant.creer();

                Intent intent = new Intent(AjoutExploitant.this,AjoutExploitation.class);
                intent.putExtra("codeExploitant", codeExploitant);
                startActivity(intent);
            }
        });

    }

}